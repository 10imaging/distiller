version: 1
pruners:
  l0_rnn_pruner:
    class: BaiduRNNPruner
    initial_sparsity : 0.05
    final_sparsity: 0.50
    q: 0.16
    ramp_epoch: 2
    ramp_slope_mult: 3
    weights: [rnn.weight_ih_l0, rnn.weight_hh_l0]

  l1_rnn_pruner:
    class: AutomatedGradualPruner
    initial_sparsity : 0.05
    final_sparsity: 0.60
    weights: [rnn.weight_ih_l1, rnn.weight_hh_l1]

  embedding_pruner:
    class: AutomatedGradualPruner
    initial_sparsity : 0.05
    final_sparsity: 0.80
    weights: [encoder.weight]

policies:
  - pruner:
      instance_name : l0_rnn_pruner
    starting_epoch: 0
    ending_epoch: 20  #14
    frequency: 1

  - pruner:
      instance_name : l1_rnn_pruner
    starting_epoch: 4
    ending_epoch: 20 #14
    frequency: 1

  - pruner:
      instance_name : embedding_pruner
    starting_epoch: 5
    ending_epoch: 21 #17
    frequency: 1
